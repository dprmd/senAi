const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/src-controller-CRUDFirestore.js-xeEZYl9J.js","assets/pnpm-react-syntax-highlighter@15.5.0_react@18.3.1--DZvnRHEN.js","assets/pnpm-react@18.3.1--FUz9cRTN.js","assets/pnpm-@babel_runtime@7.25.0--CyFcdsuD.js","assets/pnpm-refractor@3.6.0--CXVGWoH1.js","assets/pnpm-hastscript@6.0.0--DUsoOKIx.js","assets/pnpm-property-information@5.6.0--BaUulPWZ.js","assets/pnpm-xtend@4.0.2--CeaPpq3n.js","assets/pnpm-space-separated-tokens@1.1.5--CMBzgJJ4.js","assets/pnpm-comma-separated-tokens@1.0.8--DgTuumFk.js","assets/pnpm-hast-util-parse-selector@2.2.5--Cqsfuk9Y.js","assets/pnpm-parse-entities@2.0.0--Cz6FRF7l.js","assets/pnpm-character-entities-legacy@1.1.4--BW45UVHJ.js","assets/pnpm-character-reference-invalid@1.1.4--AKrgFUtc.js","assets/pnpm-is-decimal@1.0.4--Dxw1ZLrO.js","assets/pnpm-is-hexadecimal@1.0.4--Bc6OsCR9.js","assets/pnpm-is-alphanumerical@1.0.4--VupdbT_8.js","assets/pnpm-is-alphabetical@1.0.4--BlcIJk-E.js","assets/pnpm-prismjs@1.27.0--l2mXeTxv.js","assets/src-components-ui-use-toast.js-w7cDmHIs.js","assets/pnpm-i18next@23.12.2--B7JNKktp.js","assets/src-lib-myUtils.js-CM7Pyx7U.js","assets/src-controller-serverSource.js-CoR-J6Fc.js"])))=>i.map(i=>d[i]);
import{_ as x}from"./pnpm-react-syntax-highlighter@15.5.0_react@18.3.1--DZvnRHEN.js";import{r as o,j as e}from"./pnpm-react@18.3.1--FUz9cRTN.js";import{A as _}from"./src-components-composable-AlertDialogNormal.jsx-DPBkAuDY.js";import{L as b}from"./src-components-composable-Loading.jsx-DE_-Iq74.js";import{S as H}from"./src-components-composable-SettingsTop.jsx-C1g6zeeJ.js";import{u as O}from"./src-store-appStore.js-PIoWTcuH.js";import{u as P}from"./src-store-useChatsStore.js-D4_VXnQ2.js";import{u as S}from"./pnpm-zustand@4.5.4_@types_react@18.3.3_react@18.3.1--EhdkWrrw.js";import{B as D}from"./src-components-ui-button.jsx-DsJR5dHX.js";import{C as c}from"./src-components-ui-checkbox.jsx-CoBq23Pr.js";import{I as E,a as k,b as n,c as R}from"./src-components-ui-input-otp.jsx-CTHS2kEv.js";import{L as h}from"./src-components-ui-label.jsx-BbA8jTdU.js";import{t as V}from"./src-components-ui-use-toast.js-w7cDmHIs.js";import{u as z}from"./pnpm-react-i18next@15.0.1_i18next@23.12.2_react-dom@18.3.1_react@18.3.1__react@18.3.1--C-fP4VmU.js";import{m as M}from"./pnpm-framer-motion@11.3.22_react-dom@18.3.1_react@18.3.1__react@18.3.1--COr7I5SZ.js";import{L as W}from"./pnpm-lucide-react@0.412.0_react@18.3.1--BJNNq4L6.js";const le=()=>{const[A,N]=P(S(t=>[t.setChats,t.setChatsMemory])),[L]=O(S(t=>[t.userId])),{t:i}=z(),C=o.useRef(null),[v,f]=o.useState(!1),[a,l]=o.useState({withChats:!1,withBackupChats:!1,withLastSeenHistory:!1,withDestroyAllCollections:!1}),w=6,[r,d]=o.useState(""),[I,g]=o.useState(!1),[T,y]=o.useState(!1),[F,m]=o.useState(!1),j=async()=>{if(r.length<w)return;const{getPermissionToDeleteAllData:t}=await x(async()=>{const{getPermissionToDeleteAllData:p}=await import("./src-controller-CRUDFirestore.js-xeEZYl9J.js");return{getPermissionToDeleteAllData:p}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])),{sleep:s}=await x(async()=>{const{sleep:p}=await import("./src-lib-generateTime.js-DFXwsD9v.js");return{sleep:p}},[]);g(!0),await s(500);const u=await t(r);await s(500),u?m(!0):y(!0),g(!1)},B=async()=>{if(!a.withChats&&!a.withBackupChats&&!a.withLastSeenHistory&&!a.withDestroyAllCollections)return;f(!0),m(!1),a.withChats&&a.withBackupChats&&(A([]),N([])),d(""),l({withChats:!1,withBackupChats:!1,withLastSeenHistory:!1});const{deleteAllDataInFirestore:t}=await x(async()=>{const{deleteAllDataInFirestore:u}=await import("./src-controller-CRUDFirestore.js-xeEZYl9J.js");return{deleteAllDataInFirestore:u}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])),s=await t(L,r,a);V({title:i("deleted_all_data"),description:s,duration:2500}),f(!1)};return o.useEffect(()=>{const t=window.innerHeight;C.current.style.minHeight=`${t-60}px`},[]),e.jsxs(e.Fragment,{children:[e.jsxs(M.div,{className:"bg-[#FFFFFF] text-slate-900 dark:bg-[#0B141A] dark:text-slate-100",initial:{opacity:0,transition:{duration:.2}},animate:{opacity:1,transition:{duration:.2}},exit:{opacity:0,transition:{duration:.2}},children:[e.jsx(H,{title:i("delete_all_data_title"),urlBack:"/settings/other"}),e.jsxs("main",{className:"flex flex-col items-center justify-start py-10",ref:C,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-xl font-bold",id:"enter-security-code",children:i("enter_security_code")}),e.jsx("div",{className:"mt-5",children:e.jsxs(E,{"aria-labelledby":"enter-security-code",maxLength:w,value:r,onChange:t=>{d(t)},onComplete:j,children:[e.jsxs(k,{children:[e.jsx(n,{index:0}),e.jsx(n,{index:1}),e.jsx(n,{index:2})]}),e.jsx(R,{}),e.jsxs(k,{children:[e.jsx(n,{index:3}),e.jsx(n,{index:4}),e.jsx(n,{index:5})]})]})})]}),e.jsx("div",{className:"mt-10",children:I?e.jsxs(D,{disabled:!0,variant:"whatsapp",size:"sm",className:"rounded-3xl px-10",children:[i("is_checking"),e.jsx(W,{className:"ml-2 h-4 w-4 animate-spin"})]}):e.jsx(D,{variant:"whatsapp",size:"sm",className:"rounded-3xl px-10",onClick:j,children:i("check")})})]})]}),v&&e.jsx(b,{message:i("loading_delete_all_data")}),e.jsx(_,{openState:T,setOpenState:y,showTitle:!0,showDescription:!0,title:i("wrong_security_code"),description:i("wrong_security_code_desc"),showCancel:!1,continueTitle:i("try_again"),showContinue:!0,handleContinue:()=>{d("")}}),e.jsx(_,{openState:F,setOpenState:m,showTitle:!0,showDescription:!0,title:i("choose_to_delete"),showCancel:!0,showContinue:!0,handleCancel:()=>{l({withChats:!1,withBackupChats:!1,withLastSeenHistory:!1,withDestroyAllCollections:!1})},handleContinue:B,children:e.jsxs("div",{className:"flex flex-col items-start justify-center gap-y-4 px-1 py-3",children:[e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(c,{id:"chats",checked:a.withChats,onCheckedChange:t=>{l(s=>({...s,withChats:t}))}}),e.jsx(h,{htmlFor:"chats",className:"cursor-pointer",children:"Chats"})]}),e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(c,{id:"backupChats",checked:a.withBackupChats,onCheckedChange:t=>{l(s=>({...s,withBackupChats:t}))}}),e.jsx(h,{htmlFor:"backupChats",className:"cursor-pointer",children:"Backup Chats"})]}),e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(c,{id:"lastSeenHistory",checked:a.withLastSeenHistory,onCheckedChange:t=>{l(s=>({...s,withLastSeenHistory:t}))}}),e.jsx(h,{htmlFor:"lastSeenHistory",className:"cursor-pointer",children:"Last Seen History"})]}),e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(c,{id:"allCollections",checked:a.withDestroyAllCollections,onCheckedChange:t=>{l(s=>({...s,withDestroyAllCollections:t}))}}),e.jsx(h,{htmlFor:"allCollections",className:"cursor-pointer",children:"All Collections"})]})]})})]})};export{le as S};
